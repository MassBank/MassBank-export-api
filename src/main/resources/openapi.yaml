openapi: 3.0.3
info:
  title: Export MassBank content in different formats
  description:
    This microservice converts MassBank records into a number of different other formats.
  version: "0.1"
servers:
  - url: http://localhost:8080
    description: Local server
paths:
  /version:
    get:
      summary: Get the version string of the implementation.
      responses:
        "200":
          description: version string
          content:
            application/json:
              schema:
                type: string
                example: export service 0.1
  /convert:
    post:
      summary: Create a conversion task.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/conversion"
      responses:
        "200":
          description: Conversion successfully completed.
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

components:
  schemas:
    record_list:
      description: a list of records
      type: array
      items:
        type: string
      example:
        - MSBNK-IPB_Halle-PB001341
        - MSBNK-IPB_Halle-PB006202
        - MSBNK-IPB_Halle-PB006203
        - MSBNK-IPB_Halle-PB001342
        - MSBNK-IPB_Halle-PB001343

    format:
      description: a supported output format
      type: string
      enum:
        - nist_msp
        - riken_msp
      example: nist_msp

    conversion:
      description: a conversion task
      type: object
      properties:
        record_list:
          $ref: "#/components/schemas/record_list"
        format:
          $ref: "#/components/schemas/format"
#      allOf:
#        - $ref: "#/components/schemas/record_list"
#        - $ref: "#/components/schemas/format"